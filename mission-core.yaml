name: mission-core
version: 2.1.0
description: "The Unified Container Architecture for Embedded AI Agents"

architecture:
  container:
    image: "aider-vertex:latest"
    mounts:
      - host: "."
        container: "/repo" # Primary mount point used by 'up' script
        mode: "rw"
        description: "Source code workspace"
      - host: ".mission"
        container: "/mission" # Secondary mount context
        mode: "rw" # Read-Only for agents via logic, RW for Core Smith
        description: "The Toolchain Engine"
      - host: "~/.config/gcloud"
        container: "/tmp/auth.json"
        mode: "ro"
        description: "Google Cloud Credentials"

components:
  director:
    role: "The Brain (Strategist)"
    execution: "Containerized"
    launcher: "tools/bin/director"
    working_dir: "/mission"
    access: "Write: Logs, Read: Repo"
    description: "Issues commands via Radio. Plans strategy."

  localsmith:
    role: "The Hands (Technician)"
    execution: "Containerized"
    launcher: "tools/bin/toolsmith_local"
    working_dir: "/repo"
    access: "Read: Logs, Write: ACKs, Files (.ddd/)"
    description: "Executes shell commands and config updates."

  coder:
    role: "The Builder (Implementer)"
    execution: "Containerized (Aider)"
    launcher: "tools/bin/coder"
    working_dir: "/repo"
    access: "Read: Logs (Context), Write: Codebase"
    description: "Human-Guided. Reads Mission Log for context, writes code."

  architect:
    role: "The Foreman (Core Smith)"
    execution: "Containerized (Aider)"
    launcher: "tools/bin/architect"
    working_dir: "/repo"
    access: "Read: Logs, Write: Plans"
    description: "User-Operated. Interacts with Director via User Commands."

communication:
  radio:
    path: ".mission-context/mission_log.md"
    protocol: "File Tail / Stigmergy"
    flow: "Director -> [REQ] -> LocalSmith -> [ACK] -> Director"
  context:
    path: ".mission-context/mission_log.md"
    protocol: "Read-Only Context Load"
    flow: "Director -> [Info] -> Coder/Architect"
  handoff:
    path: ".mission/memo.md"
    protocol: "Human Handoff"
    flow: "Human/Director -> [Memo] -> Coder"
