#!/bin/bash
DIR="$(cd "$(dirname "$0")" && pwd)"
LAUNCHER="$DIR/../lib/launch_container.sh"

PROMPTS_DIR="$(cd "$DIR/../../prompts" && pwd)"
export MISSION_RULES_FILE="$PROMPTS_DIR/coder_rules.md"

# Force Vertex AI for both models to ensure corporate credentials are used
MAIN_MODEL="vertex_ai/gemini-2.5-pro"
WEAK_MODEL="vertex_ai/gemini-2.5-flash"

echo "ðŸ’» Coder Persona"
exec "$LAUNCHER" \
    --model "$MAIN_MODEL" \
    --weak-model "$WEAK_MODEL" \
    --no-auto-lint \
    --no-auto-commits \
    --chat-history-file .aider.coder.history.md \
    --input-history-file .aider.coder.input.history \
    --restore-chat-history \
    "$@"
